// helper functions extracted from main.cpp
